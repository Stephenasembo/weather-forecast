(()=>{const e=[],t={locationInput:document.querySelector("input"),submitBtn:document.querySelector("#submitBtn"),todayDiv:document.querySelector("#today"),forecastDiv:document.querySelector("#forecast"),forecastInput:document.querySelector("#forecastLength"),weatherInfo:document.querySelector("#weatherInfo"),heading:document.querySelector("#heading")};let i;const o="7uCiKGp7r7hEKsspvlhqflcCvrQHKFis";let n,c=null,r=!1;function s(){t.todayDiv.innerHTML="",t.forecastDiv.innerHTML="";const i=document.createElement("div");return i.textContent="Wait a moment while we load your data",t.weatherInfo.appendChild(i),i.classList.add("loading"),e.push(i),i}function a(e){return 5*(e-32)/9}t.submitBtn.addEventListener("click",(function(d){d.preventDefault();const p=document.querySelector('input[type="checkbox"]:checked');if(p&&(r=!0),n=t.locationInput.value,n)if(t.forecastInput.value<0||t.forecastInput.value>14)s().textContent="Oops an error occured! Minimum days for forecast is 0 and maximum is 15!";else{var l;i=`https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/${n}?key=28SUAPEDEBK3W6FMPLKTFMRFY`,c=Number(t.forecastInput.value)+1,l=p,t.locationInput.value="",t.forecastInput.value="",l&&(l.checked=!1),async function(){let d;try{d=s();let l=await fetch(i,{mode:"cors"});if(l.ok){e.forEach((e=>{var i;i=e,t.weatherInfo.removeChild(i)})),l=await l.json();const i=function(e){const{temp:t,conditions:i,cloudcover:o,feelslike:n,humidity:c,icon:s,visibility:d,windspeed:p,precip:l,snow:u}=e.currentConditions,m={temp:t,conditions:i,cloudcover:o,feelslike:n,humidity:c,icon:s,visibility:d,windspeed:p,precip:l,snow:u};return m.description=e.description,r&&(m.temp=a(m.temp)),{today:m,forecast:e.days}}(l);!function(e){t.heading.textContent=`Displaying Weather Conditions For ${n}`,t.todayDiv.innerHTML="";const i=e;let o;if(i.precip||(i.precip=0),r?(i.temp=a(e.temp),o="&deg;C"):o="&deg;F",t.todayDiv.innerHTML=`\n  <div class = 'dataDiv'>\n    <p>Today's weather condition is: ${e.conditions}.</p>\n    <p>The outlook is: ${e.description}.</p>\n    <p>Today's temperature is: ${e.temp} ${o}.</p>\n    <p>The cloud cover is: ${e.cloudcover} %.</p>\n    <p>The relative humidity is: ${e.humidity} %.</p>\n    <p>The visibility is: ${e.visibility}</p>\n    <p>The amount of precipitation fell or predicted to fall is: ${e.precip}.</p>\n    <p>The wind speed is: ${e.windspeed} knots.</p>\n  </div>`,e.snow){const t=document.createElement("p"),i=document.querySelector(".dataDiv");t.innerHTML=`The amount of snow fell or predicted to fall is ${e.snow}.`,i.appendChild(t)}}(i.today),p=i.forecast,t.forecastDiv.innerHTML="",p.slice(1,c).forEach((e=>{const i=document.createElement("div"),{temp:o,conditions:n,cloudcover:c,feelslike:s,humidity:a,icon:d,visibility:p,windspeed:l,precip:u,snow:m}=e,f={temp:o,conditions:n,cloudcover:c,feelslike:s,humidity:a,icon:d,visibility:p,windspeed:l,precip:u,snow:m};f.description=e.description;const h=e.datetime;let y;if(f.precip||(f.precip=0),y=r?"&deg;C":"&deg;F",i.innerHTML=`\n      <p>${h}'s weather condition is: ${f.conditions}.</p>\n      <p>The outlook is: ${f.description}.</p>\n      <p>Today's temperature is: ${f.temp} ${y}.</p>\n      <p>The cloud cover is: ${f.cloudcover} %.</p>\n      <p>The relative humidity is: ${f.humidity} %.</p>\n      <p>The visibility is: ${f.visibility}</p>\n      <p>The amount of precipitation fell or predicted to fall is: ${f.precip}.</p>\n      <p>The wind speed is: ${f.windspeed} knots.</p>`,f.snow){const e=document.createElement("p");e.innerHTML=`The amount of snow fell or predicted to fall is: ${f.snow}.`,i.appendChild(e)}t.forecastDiv.appendChild(i),i.classList.add("forecastDay")})),async function(e){const t=`https://api.giphy.com/v1/gifs/translate?api_key=${o}&s=${e}`;try{let e=await fetch(t,{mode:"cors"});if(e.ok){e=await e.json();const t=e.data.images.original.url,i=document.querySelector(".dataDiv");i.style.backgroundImage=`url(${t})`,i.style.backgroundSize="cover"}}catch(e){console.log(e)}}(i.today.icon),async function(e){let t=document.querySelectorAll(".forecastDay");t=Array.from(t);const i=e.slice(1,c),n=[];i.forEach((e=>{const t=`https://api.giphy.com/v1/gifs/translate?api_key=${o}&s=${e.icon}`;fetch(t,{mode:"cors"}).then((e=>{e.ok&&e.json().then((e=>{const t=e.data.images.original.url;n.push(t)}))}))}));for(let e=0;e<n.length;e+=1)t[e].style.backgroundImage=`url(${n[e]})`,t[e].style.backgroundSize="cover"}(i.forecast)}else 400===l.status?d.textContent="Oops an error occured!\n      Location entered may be invalid.":d.textContent="Oops an error occured!"}catch(e){d.textContent="Oops an error occured!"}var p}()}else s().textContent="Oops an error occured location can not be empty!"}))})();